# h4

## OWASP: OWASP 10 2021

### Broken Access Control

  - Moved up from 5th place to first place in OWASP top 10 (2021)
  - Tested 94% of applications for some form of broken access control with an average incidence rate of 3.81%
  - It is simply the failure in enforcing access control policies, which can lead to unauthorized data access, modification, or privilege escalation. 
  - Typical vulnerabilities include; violating least privilege, missing controls on API methods, CORS misconfiguration, insecure direct object references, etc.
  - Prevention strategies include; deny by default(least privilege), rate limit API, remove sensitive files from web roots, log access control failures, and alert admins when appropriate

### Security Misconfiguration

  - Jumped from #6 to #5 on the OWASP top 10(2021)
  - It means when servers, software, cloud services or apps are setup insecurely, or left at default settings creating "easy doors" for attackers to walk through.
  - 90% of applications were tested for some form of misconfiguration, with an average incidence rate of 4.51%
  - Common misconfigurations include; forgeting to harden certain parts of the app or cloud service, leaving default accounts/passwords unchanged, showing logs that are too detailed and might help attackers, running outdated software that has known vulnerabilities, etc.
  - Preventive strategies include; removing unused features/services to reduce attack surface, always sending security headers to clients, using automated tests to ensure that configurations stay secure overtime, regularly reviewing and updating configurations.

One comment I would make about this is how, in my opinion, cloud platforms (like AWS, Azure, GCP) have seemed to make this worse by adding way too many configuration options, making it easy for an engineer to easily setup a service wrongly. But again attention to detail is one key requirement for security engineers, so yes, the environment might make things more complicated, but it is up to the human element to make sure that everything works as it should.

### Vulnerable and Outdated Components

  - This means using outdated, old, unsupported or unpatched third party components i.e. frameworks, libraries, APIs, databases, Operating Systems etc. Attackers can exploit known vulnerabilties if any of these are used.
  - You are vulnerable if you:
      - Don't track component versions or dependencies
      - Don't patch or update regularly
      - Use unmaintained or abandoned libraries etc.
  - Preventive strategies include; having strong patch management services, downloading libraries or packages from the verified source, maintaining an ongoing update plan for the lifetime of the app.

I think one of the leading causes of this is the "set it and forget it" mentality that some developers have. They usually blindly trust a library or a package that worked once upon a time and don't look at it until something breaks or gets hacked.

### Injection

  - Dropped to #3 on the OWASP top 10(2021)
  - This happens when untrusted user data is mixed with queries or commands giving attackers the ability to change or interupt what a program does
  - The core of the problem is that data and code are not well separated.
  - The best way to detect if an application is vulnerable to this kind of attack is by reviewing the source code, also, automated testing of all inputs is strongly encouraged
  - Preventive strategies include; using safe APIs, validating user input, escape special characters properly for the interpreter, and avoid letting users supply structural parts of queries (like table/column names).

I'm suprised that although injection attacks are old, they are still very potent. It just goes to show the importance of implementing secure coding practices.

## xkcd: Exploits of a Mom

  - Uses humor to highlight the importance of sanitizing user input before doing anything with them.
  - Highlights a SQL injection and how easy it is to fall into that trap.

## WebGoat 2023.4: General: Developer Tools

To install Webgoat, I first had to install `wget` using the command `sudo apt-get wget`, then I ran 
```bash
wget https://github.com/WebGoat/WebGoat/releases/download/v2023.4/webgoat-2023.4.jar
```
I then disconnected from the internet and ran the file with
```bash
java -Dfile.encoding=UTF-8 -Dwebgoat.port=8888 -Dwebwolf.port=9090 -jar webgoat-2023.4.jar
```

The app was available on port `8888` and I was able to create my login credentials and use the service.

The two important takeaways for me from this task were that the developer tools are not only useful for looking at the HTML and CSS of a page, I can also run JavaScript from the console and see all the network requests and responses on the site through the networks tab.

## Updating Linux

Updating my Linux virtual machine was very straight forward
First I ran
```bash
sudo apt-get update
```
What this command does is to update the **package list** by fetching the latest information about available software from the internet, but it does not download or install any new software itself.

Then I ran 
```bash
sudo apt-get dist-upgrade
```
And what this command does is to install all the upgrades to the packages that have available upgrades from the updated **package list**. The nice thing about this command is that `dist-upgrade` enables "intelligent" behaviour in resolving dependency change, meaning it can install new packages or even remove conflicting ones to complete the upgrade. It's more powerful and is often used for significant system updates, like a new kernel version.

## SQL Zoo

The first part of this task was pretty easy and straightforward, it helped me get more comfortable with the syntax of SQL and some key words that I'd be using like "SELECT", "WHERE", "IN", "FROM", "BETWEEN", etc.

The second part of the task was a bit difficult, especially the 13th exercise, but it showed me how to combine the basics to extract insight from a database

<img width="378" height="261" alt="{A4EC25F9-369C-43AF-B885-01FE6BB7256E}" src="https://github.com/user-attachments/assets/0b48996c-622e-40db-a313-9fdcfcba0edd" />

Also I find it quite interesting that SQL has its own kind of regular expressions and it was able to apply it to solve on of the exercises 

<img width="1962" height="1130" alt="{F723BCB8-5B9E-4944-A03C-A5B88AC6A6ED}" src="https://github.com/user-attachments/assets/8f41e270-5bfc-42e3-bcab-17437c2faa11" />

## Portswiggers Lab: SQL Injection

To solve this lab, I noticed that when I click on a category to filter the items displayed, it modified the URL, like so
<img width="752" height="68" alt="{01204D79-0D0F-4AC1-8E7B-199F9AA017E7}" src="https://github.com/user-attachments/assets/1ef9c733-550f-43b7-82b9-fa4e857603bc" />

Now with the query that was provided at the beginning of the lab
```sql
SELECT * FROM products WHERE category = 'Gifts' AND released = 1
```
I realized that the category in the URL is being plugged into that query and being run, so i then modified the URL to be
<img width="721" height="76" alt="{6E3A16FF-9CF5-44C6-9E31-8C05A34C4F70}" src="https://github.com/user-attachments/assets/7b1ab70d-afc6-4042-bf60-41a7cacbcd3c" />

Now what this does is that instead of using the actual category name I replace it with the expression `' OR 1=1 --`, so when the server plugs in the query from the URL into the SQL command, it then becomes
```sql
SELECT * FROM products WHERE category = '' OR 1=1 --' AND released = 1
```
And what this does is that the first single quote in the expression `' OR 1=1 --` closes the quote in the original SQL query so that whatever I write next would be treated as a SQL command not a string. I then include the `OR 1=1` because I need an expression that would always evaluate as true so that the  `WHERE` clause would be rendered useless. When I have done all this, I am still left with a small problem, there is another quote `'` that is meant to encapsulate the inputted category, and there is another condition attatched there at the end of the original query, so I add `--` which is the comment syntax for SQL, effectively making everything after my phony request a comment and it will not be run.

<img width="2531" height="729" alt="{27F17710-AF2A-476A-AC80-9AE983983D9B}" src="https://github.com/user-attachments/assets/dd202bce-1721-462e-85da-936a7c91ac07" />

## Sources

- [OWASP — A01: Broken Access Control (2021)](https://owasp.org/Top10/A01_2021-Broken_Access_Control/)  
  Official OWASP Top 10 page describing Broken Access Control risks and mitigations.

- [OWASP — A05: Security Misconfiguration (2021)](https://owasp.org/Top10/A05_2021-Security_Misconfiguration/)  
  OWASP guidance on common security misconfigurations and how to avoid them.

- [OWASP — A06: Vulnerable and Outdated Components (2021)](https://owasp.org/Top10/A06_2021-Vulnerable_and_Outdated_Components/)  
  Overview of risks from using unpatched, outdated, or vulnerable third-party components.

- [OWASP — A03: Injection (2021)](https://owasp.org/Top10/A03_2021-Injection/)  
  The OWASP page that explains injection flaws (including SQL injection) and defenses.

- [PortSwigger — SQL injection: retrieve hidden data (lab)](https://portswigger.net/web-security/sql-injection/lab-retrieve-hidden-data)  
  Interactive lab from PortSwigger/ Burp Suite that demonstrates extracting hidden data via SQLi.

- [SQLZoo — SQL Tutorial](https://sqlzoo.net/wiki/SQL_Tutorial)  
  Hands-on SQL tutorial with interactive exercises — good for practicing queries and concepts.

- [Ask Ubuntu — What does `sudo apt-get update` do?](https://askubuntu.com/questions/222348/what-does-sudo-apt-get-update-do)  
  Community Q&A explaining what `apt-get update` performs and why it’s used.

- [Terokarvinen — WebGoat 2023.4: Ethical web hacking walkthrough](https://terokarvinen.com/2023/webgoat-2023-4-ethical-web-hacking/)  
  A practical walkthrough / notes on using WebGoat for learning web vulnerabilities.

- [Terokarvinen — Information Security (blog index)](https://terokarvinen.com/information-security/)  
  Collection of posts and resources related to the course.
  
- [xkcd — "Standards" (comic #927)](https://xkcd.com/327/)  
  Classic xkcd comic about SQL injection (humorous and often quoted in security/engineering contexts).
